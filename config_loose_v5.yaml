# V5 激進優化配置：提高交易頻率，優化盈虧比，提升夏普比率
# 目標：夏普>1.2, 交易頻率>2次/天, 盈虧比>2.5
general:
  seed: 42
  input_csv: "data/btcusdt_1m.parquet"
  time_col: "datetime"
  open_col: "open"
  high_col: "high"
  low_col: "low"
  close_col: "close"
  volume_col: "volume"
  start_date: null
  end_date: null
  dropna: true

preprocess:
  tz_localize: "UTC"
  resample: ["15m", "1H", "4H", "1D"]  # 多時間框架
  log_price: false

features:
  returns: {enabled: true, windows: [5, 20, 60], method: "log"}
  zscore: {enabled: true, window: 20}
  rsi: {enabled: true, window: 14}
  atr: {enabled: true, window: 14, normalize: "close"}
  bbands: {enabled: true, window: 20, k: 2.0}
  volume_percentile: {enabled: true, window: 60}
  volatility_percentile: {enabled: true, window: 60, base: "atr"}
  range_contraction: {enabled: true, window: 20}
  wick_ratios: {enabled: true, clip: 5.0}
  obv_delta: {enabled: true, window: 20}

labels:
  # V5: 降低標籤閾值以增加交易機會
  future_return_binary: {
    enabled: true, method: "log", side: "upper",
    pctile: 65, ref_window: 252, horizons: [10, 20]  # 70 → 65
  }
  breakout_confirmation: {
    enabled: true, lookback: 60, confirm_days: 2, min_breakout_pct: 0.5
  }
  max_drawdown_within_horizon: {
    enabled: true, horizon: 20, threshold_pct: -10.0
  }
  stop_target_hit_first: {
    enabled: true, horizon: 20, atr_window: 14, stop_atr: 1.5, target_atr: 2.5
  }
  regime_label: {
    enabled: true, atr_window: 14, vol_upper_pctile: 70, trend_ma_window: 50
  }

output:
  base_dir: "out/BTCUSDT/loose_v5"
  base_name: "btcusdt_loose_v5"
  features_csv: "out/BTCUSDT_1D_loose_v5_features.parquet"
  labels_csv: "out/BTCUSDT_1D_loose_v5_labels.parquet"
